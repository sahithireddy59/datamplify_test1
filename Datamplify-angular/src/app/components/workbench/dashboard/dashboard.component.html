<section class="container-fluid py-2" style="margin-top: 6%;">
  <!-- KPI Row -->
  <div class="card glass-card shadow-sm mb-3">
    <div class="card-body p-3">
      <div class="row g-0">
        <div class="col-12 col-md-6 col-lg-3" *ngFor="let kpi of kpiData; let i = index">
          <div class="position-relative group">
            <div class="p-3 rounded-3 kpi-tile">
              <div class="d-flex align-items-start justify-content-between mb-3">
                <div class="p-2 rounded-3 icon-wrap" [ngClass]="kpi.color"> 
                  <i class="bi {{kpi.icon}} fs-5"></i>
                </div>
                <div class="d-inline-flex align-items-center gap-1 small px-2 py-1 rounded-pill"
                    [ngClass]="kpi.trend === 'up' ? 'bg-success-subtle text-success' : 'bg-danger-subtle text-danger'">
                    <i class="bi bounce-icon" [ngClass]="kpi.trend === 'up' ? 'bi-arrow-up' : 'bi-arrow-down'"></i>
                    <span class="fw-medium">{{kpi.change}}</span>
                </div>
              </div>
              <div>
                <h3 class="fw-bold text-dark mb-1 display-6 fs-3">{{kpi.value}}</h3>
                <p class="text-primary mb-1 fw-semibold">{{kpi.title}}</p>
              </div>
            </div>
            <div *ngIf="i < 3" class="v-sep"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
    <div class="d-flex gap-3">
      <div class="card glass-card col-8 flex-fill">
        <div class="card-header bg-transparent py-2 border-0">
          <div class="d-flex align-items-center gap-2 fw-semibold">
            <i class="bi bi-bar-chart-line text-primary"></i>
            <span>Top 5 Records & Runs Analysis</span>
          </div>
        </div>
        <div class="card-body">
          <apx-chart
            [series]="mixedOptions.series"
            [chart]="mixedOptions.chart"
            [xaxis]="mixedOptions.xaxis"
            [yaxis]="mixedOptions.yaxis"
            [stroke]="mixedOptions.stroke"
            [dataLabels]="mixedOptions.dataLabels"
            [grid]="mixedOptions.grid"
            [tooltip]="mixedOptions.tooltip"
            [legend]="mixedOptions.legend"
            [plotOptions]="mixedOptions.plotOptions"
            [markers]="mixedOptions.markers"
            [fill]="mixedOptions.fill"
          ></apx-chart>
        </div>
      </div>

      <div class="card glass-card col-4 flex-fill">
        <div class="card-header bg-transparent py-2 border-0">
          <div class="d-flex align-items-center justify-content-between w-100">
            <div class="d-flex align-items-center gap-2 fw-semibold">
              <i class="bi bi-bullseye text-success"></i>
              <span>Status Distribution</span>
            </div>
            <div>
                <select [(ngModel)]="chartMode" (change)="changeChartMode()" class="form-select form-select-sm">
                    <option value="flowboard">FlowBoard</option>
                    <option value="taskplan">TaskPlan</option>
                </select>
            </div>
          </div>
        </div>
        <div class="card-body">
          <apx-chart
            [series]="pieOptions.series"
            [chart]="pieOptions.chart"
            [labels]="pieOptions.labels"
            [legend]="pieOptions.legend"
            [tooltip]="pieOptions.tooltip"
            [responsive]="pieOptions.responsive"
            [stroke]="pieOptions.stroke"
            [colors]="pieOptions.colors"
          ></apx-chart>
        </div>
      </div>
    </div>

  <div class="card glass-card" style="height: 305px;">
    <div class="card-header bg-transparent border-0 py-2">
      <h5 class="fw-bold text-dark">Flowboard Status Overview</h5>
    </div>

    <!-- Tabs -->
    <div class="custom-tabs px-3 d-flex justify-content-around mb-3">
        <div class="nav-item" style="width: 25%;">
            <button class="rounded-5 nav-link fw-semibold w-100"
                [ngClass]="activeTab === 'success' ? 'tab-active tab-success' : 'tab-inactive'"
                (click)="setTab('success')">Success</button>
        </div>
    
        <div class="nav-item" style="width: 25%;">
            <button class="rounded-5 nav-link fw-semibold w-100"
                [ngClass]="activeTab === 'failure' ? 'tab-active tab-failure' : 'tab-inactive'"
                (click)="setTab('failure')">Failure</button>
        </div>
    
        <div class="nav-item" style="width: 25%;">
            <button class="rounded-5 nav-link fw-semibold w-100"
                [ngClass]="activeTab === 'running' ? 'tab-active tab-running' : 'tab-inactive'"
                (click)="setTab('running')">Running</button>
        </div>
    
        <div class="nav-item" style="width: 25%;">
            <button class="rounded-5 nav-link fw-semibold w-100"
                [ngClass]="activeTab === 'recent' ? 'tab-active tab-recent' : 'tab-inactive'"
                (click)="setTab('recent')">Recent</button>
        </div>
    </div>


    <!-- Content -->
    <div class="list-group list-group-flush">
      <div class="list-group-item rounded-5 d-flex align-items-center justify-content-between" *ngFor="let item of filteredData">
        <div class="d-flex align-items-center">
          <i class="bi bi-check-circle-fill text-success me-2"></i>
          <span class="fw-semibold">{{ item.title }}</span>
        </div>
        <div class="d-flex align-items-center">
          <span class="badge bg-success-subtle text-success fw-semibold me-2">{{ item.runs }} runs</span>
          <small class="text-muted">{{ item.timeAgo }}</small>  
        </div>
      </div>
    </div>
  </div>    
</section>
